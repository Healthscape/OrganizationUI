<div class="auth-container">
  <app-logo></app-logo>
  <div class="form-container login-container" *ngIf="!isSignUp">
    <form>
      <mat-form-field>
        <mat-icon matPrefix>
          <span class="material-symbols-outlined">person</span>
        </mat-icon>
        <input matInput placeholder="Email" [formControl]="loginEmailCtrl">
      </mat-form-field>

      <mat-form-field>
        <mat-icon matPrefix>
          <span class="material-symbols-outlined">lock</span>
        </mat-icon>
        <input matInput placeholder="Password" [formControl]="loginPasswordCtrl">
      </mat-form-field>


      <mat-error *ngIf="showErrorMessage" >{{errorMessage}}</mat-error >

      <button mat-raised-button color="accent" (click)="onLogin()" type="button">Login</button>
      <div class="change-question">
        <p class="text">Doesn't have an account?</p>
        <p class="link" (click)="onChange()">Register</p>
      </div>
    </form>
  </div>
  <div class="form-container register-container" *ngIf="isSignUp">
    <form>
      <div class="name-surname-container">
        <mat-form-field>
          <input matInput placeholder="Name" [formControl]="registerNameCtrl">
          <mat-icon class="material-symbols-outlined" color="warn" matSuffix
                    *ngIf="registerNameCtrl.touched && registerNameCtrl.invalid" [matTooltipClass]="'error-tooltip'"
                    matTooltip="Please enter your name.">error
          </mat-icon>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Surname" [formControl]="registerSurnameCtrl">
          <mat-icon class="material-symbols-outlined" color="warn" matSuffix
                    *ngIf="registerSurnameCtrl.touched && registerSurnameCtrl.invalid"
                    [matTooltipClass]="'error-tooltip'"
                    matTooltip="Please enter your surname.">error
          </mat-icon>
        </mat-form-field>
      </div>

      <mat-form-field>
        <input matInput placeholder="Email" [formControl]="registerEmailCtrl">
        <mat-icon matSuffix class="material-symbols-outlined" color="warn"
                  *ngIf="(registerEmailCtrl.touched && registerEmailCtrl.invalid) || registerEmailCtrl.hasError('email')"
                  [matTooltipClass]="'error-tooltip'"
                  matTooltip="Please enter your email address in format: yourname@example.com.">error
        </mat-icon>
      </mat-form-field>

      <mat-form-field>
        <input matInput placeholder="Password" [formControl]="registerPasswordCtrl"
               [type]="passwordVisible ? 'text' : 'password'" autocomplete="new-password">
        <div class="form-field-icons" matSuffix>
          <mat-icon class="material-symbols-outlined" color="warn"
                    *ngIf="(registerPasswordCtrl.touched && registerPasswordCtrl.invalid) || registerPasswordCtrl.hasError('password')"
                    [matTooltipClass]="'error-tooltip'"
                    matTooltip="Please enter your email address in format: yourname@example.com.">error
          </mat-icon>
          <button type="button" mat-icon-button (click)="passwordVisible = !passwordVisible"
                  [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="!passwordVisible">
            <mat-icon>{{passwordVisible ? 'visibility' : 'visibility_off'}}</mat-icon>
          </button>
        </div>
      </mat-form-field>

      <mat-form-field>
        <input matInput placeholder="Confirm Password" [formControl]="registerConfirmPasswordCtrl"
               [type]="confirmPasswordVisible ? 'text' : 'password'">
        <div class="form-field-icons" matSuffix>
          <mat-icon class="material-symbols-outlined"
                    *ngIf="(registerConfirmPasswordCtrl.touched && registerConfirmPasswordCtrl.invalid) || registerConfirmPasswordCtrl.hasError('matching')"
                    color="warn" [matTooltipClass]="'error-tooltip'"
                    matTooltip="Passwords does not match!">error
          </mat-icon>
          <button type="button" mat-icon-button matSuffix (click)="confirmPasswordVisible = !confirmPasswordVisible"
                  [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="!confirmPasswordVisible">
            <mat-icon>{{confirmPasswordVisible ? 'visibility' : 'visibility_off'}}</mat-icon>
          </button>
        </div>
      </mat-form-field>

      <mat-progress-bar *ngIf="isLoading" mode="indeterminate" color="accent"></mat-progress-bar>
        <button mat-raised-button color="accent" (click)="onRegister()" type="button" [disabled]="!registerForm.valid" *ngIf="!isLoading">
          Register
        </button>
        <div class="change-question" *ngIf="!isLoading">
          <p class="text">Already have an account?</p>
          <p class="link" (click)="onChange()">Login</p>
        </div>

    </form>
  </div>
</div>
